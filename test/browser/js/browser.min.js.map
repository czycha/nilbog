{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./dist/referee.js","webpack:///./dist/walk.js","webpack:///./dist/conflicts.js","webpack:///./node_modules/uid/index.js","webpack:///./dist/observer.js","webpack:///./dist/index.js","webpack:///./test/browser/js/browser.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","Referee","instance","TypeError","_classCallCheck","this","_ref","prevent","observeThese","Set","observeAll","forEach","type","add","undefined","Array","from","ap","create","delete","modify","_ref2","_ref3","allow","_ref3$added","added","_ref3$removed","removed","_ref3$modified","modified","check","items","a","filter","item","includes","default","nodes","cb","slice","node","shift","childNodes","concat","PreventObserverList","ChangelogObserverList","ObserverList","obj","_referee","_referee2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","observers","observer","push","equals","connected","matches","el1","parent","el2","contains","conflicts","tiebreaker","uids","map","uid","sort","_ObserverList","error","_this","getPrototypeOf","other","go","internalConflicts","console","warn","_ObserverList2","apply","arguments","undo","lowLevelTiebreakers","_this3","conflictList","types","changed","conflict","conflictRules","extras","conflictUndo","deliberate","newUndo","ConflictManager","noop","preventMsg","preventCreate","preventDelete","protectText","protectClasses","protectAttributes","action","_this4","resolve","_observers$action","_len2","more","_key2","_len","_key","len","Math","random","toString","substr","_uid2","_interopRequireDefault","_walk2","MO","window","MutationObserver","WebkitMutationObserver","Observer","selector","observerParams","fn","bind","params","el","_matches","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","document","ownerDocument","querySelectorAll","Element","isPrototypeOf","NodeList","isArray","match","compareTo","collection","observe","disconnect","f","connect","_observer2","_conflicts2","_toConsumableArray","arr","arr2","placeNode","nextSibling","insertBefore","appendChild","Nilbog","safe","conflictManager","_ref$parent","documentElement","childList","subtree","records","addedNodes","remove","register","_ref3$parent","characterData","characterDataOldValue","_this2","fixed","validNode","nodeType","Node","TEXT_NODE","_ref4","oldValue","removedNodes","addedTextNodes","removedTextNodes","parentNode","validTarget","operate","data","_ref5","_ref5$parent","_ref5$rules","rules","normalize","attributes","attributeOldValue","attributeFilter","_ref6","attributeName","undoThis","hasAttribute","getAttribute","resolution","removeAttribute","setAttribute","_ref7","_ref7$parent","_ref7$rules","relevant","record","changedPrev","_ref8","diff","temp","left","right","_venn","newClasses","split","className","oldClasses","removeThis","addThis","middle","classes","join","_ref9","_ref9$parent","_ref9$onTreeDeletion","onTreeDeletion","_this5","_ref10","place","containsMatches","some","isSameNode","final","preserve","nilbog"],"mappings":"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","file":"browser.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Referee = function () {\n  function Referee() {\n    _classCallCheck(this, Referee);\n  }\n\n  _createClass(Referee, null, [{\n    key: 'filter',\n    value: function filter(_ref) {\n      var prevent = _ref.prevent;\n\n      var observeThese = new Set();\n      var observeAll = false;\n      var types = ['create', 'modify', 'delete'];\n      types.forEach(function (type) {\n        var p = prevent[type];\n        if (p === true) {\n          observeAll = true;\n          return false;\n        }\n        p.forEach(function (i) {\n          observeThese.add(i);\n        });\n      });\n      return observeAll ? undefined : Array.from(observeThese);\n    }\n  }, {\n    key: 'normalize',\n    value: function normalize(ap) {\n      if (ap === true) {\n        return { create: true, delete: true, modify: true };\n      } else if (ap === false) {\n        return { create: [], delete: [], modify: [] };\n      } else {\n        return {\n          create: !ap.create ? [] : ap.create,\n          delete: !ap.delete ? [] : ap.delete,\n          modify: !ap.modify ? [] : ap.modify\n        };\n      }\n    }\n  }, {\n    key: 'deliberate',\n    value: function deliberate(_ref2, _ref3) {\n      var allow = _ref2.allow,\n          prevent = _ref2.prevent;\n      var _ref3$added = _ref3.added,\n          added = _ref3$added === undefined ? [] : _ref3$added,\n          _ref3$removed = _ref3.removed,\n          removed = _ref3$removed === undefined ? [] : _ref3$removed,\n          _ref3$modified = _ref3.modified,\n          modified = _ref3$modified === undefined ? [] : _ref3$modified;\n\n      var check = function check(type, items) {\n        var a = allow[type];\n        var p = prevent[type];\n        return items.filter(function (item) {\n          if (p === true && a === true) {\n            return false;\n          } else if (p === true && a !== true) {\n            return !a.includes(item);\n          } else if (p !== true && a === true) {\n            return p.includes(item);\n          } else {\n            return p.includes(item) && !a.includes(item);\n          }\n        });\n      };\n      return {\n        create: check('create', added),\n        delete: check('delete', removed),\n        modify: check('modify', modified)\n      };\n    }\n  }]);\n\n  return Referee;\n}();\n\nexports.default = Referee;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction walk(nodes, cb) {\n  var slice = Array.prototype.slice;\n  if (!('length' in nodes)) nodes = [nodes];\n  nodes = slice.call(nodes);\n  while (nodes.length) {\n    var node = nodes.shift();\n    if (!node) continue;\n    var ret = cb(node);\n    if (ret === undefined && node.childNodes && node.childNodes.length) {\n      nodes = slice.call(node.childNodes).concat(nodes);\n    }\n  }\n}\n\nexports.default = walk;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PreventObserverList = exports.ChangelogObserverList = exports.ObserverList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _referee = require('./referee');\n\nvar _referee2 = _interopRequireDefault(_referee);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction elementsAreRelated(el1, el2) {\n  return el1 === el2 || el1.contains(el2) || el2.contains(el1);\n}\n\nvar ObserverList = function () {\n  function ObserverList() {\n    _classCallCheck(this, ObserverList);\n\n    this.observers = [];\n  }\n\n  _createClass(ObserverList, [{\n    key: 'add',\n    value: function add(observer) {\n      this.observers.push(observer);\n    }\n  }, {\n    key: 'conflicts',\n    value: function conflicts(observer, node) {\n      return this.observers.filter(function (o) {\n        return !o.equals(observer) && o.connected && o.matches(node) && elementsAreRelated(o.parent, observer.parent);\n      });\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(observer, node) {\n      var conflicts = this.conflicts(observer, node);\n      if (conflicts.length === 0) return true;\n      return this.tiebreaker(observer, conflicts);\n    }\n  }, {\n    key: 'tiebreaker',\n    value: function tiebreaker(observer, conflicts) {\n      var uids = conflicts.map(function (_ref) {\n        var uid = _ref.uid;\n        return uid;\n      });\n      uids.push(observer.uid);\n      return uids.sort()[0] === observer.uid;\n    }\n  }]);\n\n  return ObserverList;\n}();\n\nvar PreventObserverList = function (_ObserverList) {\n  _inherits(PreventObserverList, _ObserverList);\n\n  function PreventObserverList(error) {\n    _classCallCheck(this, PreventObserverList);\n\n    var _this = _possibleConstructorReturn(this, (PreventObserverList.__proto__ || Object.getPrototypeOf(PreventObserverList)).call(this));\n\n    _this.error = error;\n    return _this;\n  }\n\n  _createClass(PreventObserverList, [{\n    key: 'resolve',\n    value: function resolve(observer, node, other) {\n      var go = true;\n      var internalConflicts = this.conflicts(observer, node);\n      if (internalConflicts.length > 0) {\n        go = this.tiebreaker(observer, internalConflicts);\n        if (!go) return false;\n      }\n      var externalConflicts = other.conflicts(observer, node);\n      if (externalConflicts.length > 0) {\n        console.warn(this.error);\n        go = false;\n      }\n      return go;\n    }\n  }]);\n\n  return PreventObserverList;\n}(ObserverList);\n\nvar ChangelogObserverList = function (_ObserverList2) {\n  _inherits(ChangelogObserverList, _ObserverList2);\n\n  function ChangelogObserverList() {\n    _classCallCheck(this, ChangelogObserverList);\n\n    return _possibleConstructorReturn(this, (ChangelogObserverList.__proto__ || Object.getPrototypeOf(ChangelogObserverList)).apply(this, arguments));\n  }\n\n  _createClass(ChangelogObserverList, [{\n    key: 'resolve',\n    value: function resolve(observer, node, undo) {\n      var conflicts = this.conflicts(observer, node);\n      if (conflicts.length === 0 || this.tiebreaker(observer, conflicts)) return true;\n      return this.lowLevelTiebreakers(undo, observer, conflicts);\n    }\n  }, {\n    key: 'lowLevelTiebreakers',\n    value: function lowLevelTiebreakers(undo, observer, conflicts) {\n      var _this3 = this;\n\n      var conflictList = { create: {}, delete: {}, modify: {} };\n      var types = ['create', 'delete', 'modify'];\n      var changed = { added: undo.create, removed: undo.delete, modified: undo.modify };\n      conflicts.forEach(function (conflict) {\n        var conflictRules = conflict.extras[0];\n        var conflictUndo = _referee2.default.deliberate(conflictRules, changed);\n        types.forEach(function (type) {\n          conflictUndo[type].forEach(function (key) {\n            if (conflictList[type][key] === undefined) conflictList[type][key] = [];\n            conflictList[type][key].push(conflict);\n          });\n        });\n      });\n      var newUndo = { create: [], delete: [], modify: [] };\n      types.forEach(function (type) {\n        newUndo[type] = undo[type].filter(function (key) {\n          return !conflictList[type][key] || _this3.tiebreaker(observer, conflictList[type][key]);\n        });\n      });\n      return newUndo;\n    }\n  }]);\n\n  return ChangelogObserverList;\n}(ObserverList);\n\nvar ConflictManager = function () {\n  function ConflictManager() {\n    var noop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, ConflictManager);\n\n    this.noop = noop;\n    if (!noop) {\n      var preventMsg = 'Nilbog conflict: preventCreate and preventDelete targeting same node. No action taken.';\n\n      this.observers = {\n        preventCreate: new PreventObserverList(preventMsg),\n        preventDelete: new PreventObserverList(preventMsg),\n        protectText: new ObserverList(),\n        protectClasses: new ChangelogObserverList(),\n        protectAttributes: new ChangelogObserverList()\n      };\n    }\n  }\n\n  _createClass(ConflictManager, [{\n    key: 'register',\n    value: function register(type, observer) {\n      if (!this.noop) this.observers[type].add(observer);\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(action, observer, node) {\n      var _this4 = this;\n\n      if (this.noop) return true;\n      var resolve = function resolve() {\n        var _observers$action;\n\n        for (var _len2 = arguments.length, more = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          more[_key2] = arguments[_key2];\n        }\n\n        return (_observers$action = _this4.observers[action]).resolve.apply(_observers$action, [observer, node].concat(more));\n      };\n      switch (action) {\n        case 'preventCreate':\n          return resolve(this.observers['preventDelete']);\n        case 'preventDelete':\n          return resolve(this.observers['preventCreate']);\n        default:\n          for (var _len = arguments.length, extras = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            extras[_key - 3] = arguments[_key];\n          }\n\n          return resolve.apply(undefined, extras);\n      }\n    }\n  }]);\n\n  return ConflictManager;\n}();\n\nexports.ObserverList = ObserverList;\nexports.ChangelogObserverList = ChangelogObserverList;\nexports.PreventObserverList = PreventObserverList;\nexports.default = ConflictManager;","/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _uid = require('uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _walk = require('./walk');\n\nvar _walk2 = _interopRequireDefault(_walk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MO = window.MutationObserver || window.WebkitMutationObserver;\n\nfunction _matches(el, selector) {\n  if (typeof selector === 'string') {\n    return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector || function (s) {\n      var matches = (this.document || this.ownerDocument).querySelectorAll(s);\n      var i = matches.length;\n      while (--i >= 0 && matches.item(i) !== this) {}\n      return i > -1;\n    }).call(el, selector);\n  } else if (Element.prototype.isPrototypeOf(selector)) {\n    return el === selector;\n  } else if (NodeList.prototype.isPrototypeOf(selector) || Array.isArray(selector)) {\n    var match = false;\n    selector.forEach(function (compareTo) {\n      match = _matches(el, compareTo);\n      if (match) return false;\n    });\n    return match;\n  } else {\n    return false;\n  }\n}\n\nvar Observer = function () {\n  function Observer(selector, parent, observerParams, fn) {\n    _classCallCheck(this, Observer);\n\n    this.selector = selector;\n\n    this.observer = new MO(fn.bind(this));\n\n    this.parent = parent;\n\n    this.params = observerParams;\n\n    this.connected = false;\n\n    for (var _len = arguments.length, extras = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n      extras[_key - 4] = arguments[_key];\n    }\n\n    this.extras = extras;\n\n    this.uid = (0, _uid2.default)();\n  }\n\n  _createClass(Observer, [{\n    key: 'matches',\n    value: function matches(el) {\n      return _matches(el, this.selector);\n    }\n  }, {\n    key: 'containsMatches',\n    value: function containsMatches(el) {\n      var _this = this;\n\n      var collection = [];\n      (0, _walk2.default)(el, function (node) {\n        if (_this.matches(node)) {\n          collection.push(node);\n          return true;\n        }\n      });\n      return collection;\n    }\n  }, {\n    key: 'inspect',\n    value: function inspect() {\n      return this.uid;\n    }\n  }, {\n    key: 'equals',\n    value: function equals(other) {\n      return this.uid === other.uid;\n    }\n  }, {\n    key: 'connect',\n    value: function connect() {\n      if (!this.connected) {\n        this.observer.observe(this.parent, this.params);\n        this.connected = true;\n      }\n      return true;\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      if (this.connected) {\n        this.observer.disconnect();\n        this.connected = false;\n      }\n      return true;\n    }\n  }, {\n    key: 'operate',\n    value: function operate(fn) {\n      if (this.connected) {\n        this.disconnect();\n        var f = fn.call(this);\n        this.connect();\n        return f;\n      } else {\n        return fn.call(this);\n      }\n    }\n  }]);\n\n  return Observer;\n}();\n\nexports.default = Observer;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _observer = require('./observer');\n\nvar _observer2 = _interopRequireDefault(_observer);\n\nvar _conflicts = require('./conflicts');\n\nvar _conflicts2 = _interopRequireDefault(_conflicts);\n\nvar _referee = require('./referee');\n\nvar _referee2 = _interopRequireDefault(_referee);\n\nvar _walk = require('./walk');\n\nvar _walk2 = _interopRequireDefault(_walk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction venn(left, right) {\n  return {\n    left: left.filter(function (a) {\n      return !right.includes(a);\n    }),\n    right: right.filter(function (a) {\n      return !left.includes(a);\n    }),\n    middle: left.filter(function (a) {\n      return right.includes(a);\n    })\n  };\n}\n\nfunction arrDiff(oldArr, newArr) {\n  var _venn = venn(newArr, oldArr),\n      added = _venn.left,\n      removed = _venn.right;\n\n  return {\n    added: added,\n    removed: removed\n  };\n}\n\nfunction revertDiff(arr, diff) {\n  var temp = new Set(arr);\n  diff.added.forEach(function (removeThis) {\n    temp.delete(removeThis);\n  });\n  diff.removed.forEach(function (addThis) {\n    temp.add(addThis);\n  });\n  return Array.from(temp);\n}\n\nfunction placeNode(target, node, nextSibling) {\n  if (nextSibling) {\n    target.insertBefore(node, nextSibling);\n  } else {\n    target.appendChild(node);\n  }\n}\n\nvar Nilbog = function () {\n  function Nilbog() {\n    var safe = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    _classCallCheck(this, Nilbog);\n\n    this.safe = safe;\n\n    this.conflictManager = new _conflicts2.default(!this.safe);\n  }\n\n  _createClass(Nilbog, [{\n    key: 'preventCreate',\n    value: function preventCreate(selector) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$parent = _ref.parent,\n          parent = _ref$parent === undefined ? document.documentElement : _ref$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { childList: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this = this;\n\n        records.forEach(function (_ref2) {\n          var addedNodes = _ref2.addedNodes;\n\n          addedNodes.forEach(function (node) {\n            if (_this.matches(node) && conflictManager.resolve('preventCreate', _this, node)) {\n              node.remove();\n            }\n          });\n        });\n      });\n      conflictManager.register('preventCreate', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectText',\n    value: function protectText(selector) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$parent = _ref3.parent,\n          parent = _ref3$parent === undefined ? document.documentElement : _ref3$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { characterData: true, characterDataOldValue: true, subtree: true, childList: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this2 = this;\n\n        var fixed = [];\n        var validTarget = function validTarget(target) {\n          return _this2.matches(target.parentNode) && !fixed.includes(target) && conflictManager.resolve('protectText', _this2, target.parentNode);\n        };\n        var validNode = function validNode(node, target) {\n          return node.nodeType === Node.TEXT_NODE && _this2.matches(target) && !fixed.includes(target) && conflictManager.resolve('protectText', _this2, target);\n        };\n        records.forEach(function (_ref4) {\n          var type = _ref4.type,\n              target = _ref4.target,\n              oldValue = _ref4.oldValue,\n              addedNodes = _ref4.addedNodes,\n              removedNodes = _ref4.removedNodes,\n              nextSibling = _ref4.nextSibling;\n\n          var addedTextNodes = Array.from(addedNodes).filter(function (node) {\n            return validNode(node, target);\n          });\n          var removedTextNodes = Array.from(removedNodes).filter(function (node) {\n            return validNode(node, target);\n          });\n          if (type === 'characterData' && validTarget(target)) {\n            _this2.operate(function () {\n              target.data = oldValue;\n            });\n            fixed.push(target);\n          }\n          if (type === 'childList' && (addedTextNodes.length > 0 || removedTextNodes.length > 0)) {\n            _this2.operate(function () {\n              addedTextNodes.forEach(function (added) {\n                return added.remove();\n              });\n              removedTextNodes.forEach(function (removed) {\n                return placeNode(target, removed, nextSibling);\n              });\n            });\n          }\n        });\n      });\n      conflictManager.register('protectText', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectAttributes',\n    value: function protectAttributes(selector) {\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$parent = _ref5.parent,\n          parent = _ref5$parent === undefined ? document.documentElement : _ref5$parent,\n          _ref5$rules = _ref5.rules,\n          rules = _ref5$rules === undefined ? { prevent: true, allow: false } : _ref5$rules;\n\n      var conflictManager = this.conflictManager;\n      var allow = _referee2.default.normalize(rules.allow);\n      var prevent = _referee2.default.normalize(rules.prevent);\n      var attributeFilter = _referee2.default.filter({ allow: allow, prevent: prevent });\n      var params = {\n        attributes: true,\n        attributeOldValue: true,\n        subtree: true,\n        attributeFilter: attributeFilter\n      };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this3 = this;\n\n        var fixed = [];\n        records.forEach(function (_ref6) {\n          var attributeName = _ref6.attributeName,\n              target = _ref6.target,\n              oldValue = _ref6.oldValue;\n\n          if (attributeName !== 'class' && !fixed.includes(attributeName) && _this3.matches(target)) {\n            var changed = { added: [], removed: [], modified: [] };\n            var undoThis = void 0;\n            if (oldValue === null) {\n              changed.added.push(attributeName);\n              undoThis = 'create';\n            } else if (!target.hasAttribute(attributeName)) {\n              changed.removed.push(attributeName);\n              undoThis = 'delete';\n            } else if (oldValue !== target.getAttribute(attributeName)) {\n              changed.modified.push(attributeName);\n              undoThis = 'modify';\n            } else {\n              return false;\n            }\n            var undo = _referee2.default.deliberate({ allow: allow, prevent: prevent }, changed);\n            var resolution = conflictManager.resolve('protectAttributes', _this3, target, undo);\n            if (resolution !== true) undo = resolution;\n            if (undo[undoThis].length === 1) {\n              _this3.operate(function () {\n                switch (undoThis) {\n                  case 'create':\n                    target.removeAttribute(attributeName);\n                    break;\n                  case 'delete':\n                  case 'modify':\n                    target.setAttribute(attributeName, oldValue);\n                    break;\n                }\n              });\n              fixed.push(attributeName);\n            }\n          }\n        });\n      }, { allow: allow, prevent: prevent });\n      conflictManager.register('protectAttributes', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectClasses',\n    value: function protectClasses(selector) {\n      var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref7$parent = _ref7.parent,\n          parent = _ref7$parent === undefined ? document.documentElement : _ref7$parent,\n          _ref7$rules = _ref7.rules,\n          rules = _ref7$rules === undefined ? { prevent: true, allow: false } : _ref7$rules;\n\n      var conflictManager = this.conflictManager;\n      var allow = _referee2.default.normalize(rules.allow);\n      var prevent = _referee2.default.normalize(rules.prevent);\n      var params = {\n        attributes: true,\n        attributeOldValue: true,\n        subtree: true,\n        attributeFilter: ['class']\n      };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this4 = this;\n\n        var relevant = records.filter(function (record) {\n          return _this4.matches(record.target);\n        });\n        if (relevant.length === 0) return false;\n        var changedPrev = void 0;\n        relevant.forEach(function (_ref8) {\n          var attributeName = _ref8.attributeName,\n              target = _ref8.target,\n              oldValue = _ref8.oldValue;\n\n          var newClasses = target.getAttribute('class').split(' ').filter(function (className) {\n            return className !== '';\n          });\n          var oldClasses = changedPrev ? revertDiff(newClasses, changedPrev) : oldValue.split(' ').filter(function (className) {\n            return className !== '';\n          });\n          var changed = arrDiff(oldClasses, newClasses);\n          changedPrev = changed;\n          var undo = _referee2.default.deliberate({ allow: allow, prevent: prevent }, changed);\n          var resolution = conflictManager.resolve('protectClasses', _this4, target, undo);\n          if (resolution !== true) undo = resolution;\n          if (undo.delete.length > 0 || undo.create.length > 0) {\n            var classes = [].concat(_toConsumableArray(newClasses.filter(function (className) {\n              return !undo.create.includes(className);\n            })), _toConsumableArray(undo.delete)).join(' ');\n            _this4.operate(function () {\n              target.setAttribute('class', classes);\n            });\n          }\n        });\n      }, { allow: allow, prevent: prevent });\n      conflictManager.register('protectClasses', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'preventDelete',\n    value: function preventDelete(selector) {\n      var _ref9 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref9$parent = _ref9.parent,\n          parent = _ref9$parent === undefined ? document.documentElement : _ref9$parent,\n          _ref9$onTreeDeletion = _ref9.onTreeDeletion,\n          onTreeDeletion = _ref9$onTreeDeletion === undefined ? false : _ref9$onTreeDeletion;\n\n      if (![false, 'recreate-full-tree', 'recreate-direct-path', 'place-at-top-level'].includes(onTreeDeletion)) {\n        throw new TypeError('onTreeDeletion must be one of: [false, \"recreate-full-tree\", \"recreate-full-tree\", \"place-at-top-level\"]. Received: ' + onTreeDeletion);\n      }\n      var conflictManager = this.conflictManager;\n      var params = { childList: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this5 = this;\n\n        var resolve = function resolve(node) {\n          return conflictManager.resolve('preventDelete', _this5, node);\n        };\n        records.forEach(function (_ref10) {\n          var removedNodes = _ref10.removedNodes,\n              target = _ref10.target,\n              nextSibling = _ref10.nextSibling;\n\n          var place = function place(node) {\n            return placeNode(target, node, nextSibling);\n          };\n          removedNodes.forEach(function (node) {\n            var collection = void 0;\n            if (_this5.matches(node)) {\n              if (resolve(node)) {\n                place(node);\n              }\n            } else if (onTreeDeletion && (collection = _this5.containsMatches(node).filter(resolve)).length > 0) {\n              switch (onTreeDeletion) {\n                case 'place-at-top-level':\n                  collection.forEach(function (n) {\n                    place(n);\n                  });\n                  break;\n                case 'recreate-full-tree':\n                  place(node);\n                  break;\n                case 'recreate-direct-path':\n                  var preserve = function preserve(node) {\n                    return collection.some(function (el) {\n                      return node.contains(el);\n                    });\n                  };\n                  var final = function final(node) {\n                    return collection.some(function (el) {\n                      return node.isSameNode(el);\n                    });\n                  };\n                  (0, _walk2.default)(node, function (node) {\n                    if (final(node)) return true;\n                    if (!preserve(node)) {\n                      node.remove();\n                      return true;\n                    }\n                  });\n                  place(node);\n                  break;\n              }\n            }\n          });\n        });\n      });\n      conflictManager.register('preventDelete', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'freeze',\n    value: function freeze() {\n      return {\n        protectText: this.protectText.apply(this, arguments),\n        preventDelete: this.preventDelete.apply(this, arguments),\n        protectAttributes: this.protectAttributes.apply(this, arguments),\n        protectClasses: this.protectClasses.apply(this, arguments)\n      };\n    }\n  }]);\n\n  return Nilbog;\n}();\n\nmodule.exports = Nilbog;","var Nilbog = require('../../../dist/')\nwindow.nilbog = new Nilbog();\n"],"sourceRoot":""}