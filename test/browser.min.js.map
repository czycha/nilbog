{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./dist/referee.js","webpack:///./dist/walk.js","webpack:///./dist/conflicts.js","webpack:///./node_modules/uid/index.js","webpack:///./dist/observer.js","webpack:///./dist/index.js","webpack:///./test/browser.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","Referee","instance","TypeError","_classCallCheck","this","_ref","prevent","observeThese","Set","observeAll","forEach","type","add","undefined","Array","from","ap","create","delete","modify","_ref2","_ref3","allow","_ref3$added","added","_ref3$removed","removed","_ref3$modified","modified","check","items","a","filter","item","includes","default","nodes","cb","slice","node","shift","childNodes","concat","PreventObserverList","ChangelogObserverList","ObserverList","obj","_referee","_referee2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","observers","observer","push","equals","connected","matches","el1","parent","el2","contains","conflicts","tiebreaker","uids","map","uid","sort","_ObserverList","error","_this","getPrototypeOf","other","go","internalConflicts","console","warn","_ObserverList2","apply","arguments","undo","lowLevelTiebreakers","_this3","conflictList","types","changed","conflict","conflictRules","extras","conflictUndo","deliberate","newUndo","ConflictManager","noop","preventMsg","preventCreate","preventDelete","protectText","protectClasses","protectAttributes","action","_this4","resolve","_observers$action","_len2","more","_key2","_len","_key","len","Math","random","toString","substr","_uid2","_interopRequireDefault","_walk2","MO","window","MutationObserver","WebkitMutationObserver","Observer","selector","observerParams","fn","bind","params","el","_matches","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","document","ownerDocument","querySelectorAll","Element","isPrototypeOf","NodeList","isArray","match","compareTo","collection","observe","disconnect","f","connect","_observer2","_conflicts2","_toConsumableArray","arr","arr2","Nilbog","safe","conflictManager","_ref$parent","documentElement","childList","subtree","records","addedNodes","remove","register","_ref3$parent","characterData","characterDataOldValue","_this2","_ref4","oldValue","parentNode","operate","data","_ref5","_ref5$parent","_ref5$rules","rules","normalize","attributes","attributeOldValue","attributeFilter","_ref6","attributeName","undoThis","hasAttribute","getAttribute","resolution","removeAttribute","setAttribute","_ref7","_ref7$parent","_ref7$rules","_ref8","left","right","_venn","newClasses","split","className","oldClasses","middle","classes","join","_ref9","_ref9$parent","_ref9$onTreeDeletion","onTreeDeletion","_this5","_ref10","removedNodes","nextSibling","previousSibling","placeNode","insertBefore","insertAdjacentHTML","appendChild","containsMatches","some","isSameNode","final","preserve","nilbog","freeze","created","createElement","createdText","createTextNode","classList","log","body","addEventListener","setInterval","attachEvent","readyState"],"mappings":"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","file":"browser.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Referee = function () {\n  function Referee() {\n    _classCallCheck(this, Referee);\n  }\n\n  _createClass(Referee, null, [{\n    key: 'filter',\n    value: function filter(_ref) {\n      var prevent = _ref.prevent;\n\n      var observeThese = new Set();\n      var observeAll = false;\n      var types = ['create', 'modify', 'delete'];\n      types.forEach(function (type) {\n        var p = prevent[type];\n        if (p === true) {\n          observeAll = true;\n          return false;\n        }\n        p.forEach(function (i) {\n          observeThese.add(i);\n        });\n      });\n      return observeAll ? undefined : Array.from(observeThese);\n    }\n  }, {\n    key: 'normalize',\n    value: function normalize(ap) {\n      if (ap === true) {\n        return { create: true, delete: true, modify: true };\n      } else if (ap === false) {\n        return { create: [], delete: [], modify: [] };\n      } else {\n        return {\n          create: !ap.create ? [] : ap.create,\n          delete: !ap.delete ? [] : ap.delete,\n          modify: !ap.modify ? [] : ap.modify\n        };\n      }\n    }\n  }, {\n    key: 'deliberate',\n    value: function deliberate(_ref2, _ref3) {\n      var allow = _ref2.allow,\n          prevent = _ref2.prevent;\n      var _ref3$added = _ref3.added,\n          added = _ref3$added === undefined ? [] : _ref3$added,\n          _ref3$removed = _ref3.removed,\n          removed = _ref3$removed === undefined ? [] : _ref3$removed,\n          _ref3$modified = _ref3.modified,\n          modified = _ref3$modified === undefined ? [] : _ref3$modified;\n\n      var check = function check(type, items) {\n        var a = allow[type];\n        var p = prevent[type];\n        return items.filter(function (item) {\n          if (p === true && a === true) {\n            return false;\n          } else if (p === true && a !== true) {\n            return !a.includes(item);\n          } else if (p !== true && a === true) {\n            return p.includes(item);\n          } else {\n            return p.includes(item) && !a.includes(item);\n          }\n        });\n      };\n      return {\n        create: check('create', added),\n        delete: check('delete', removed),\n        modify: check('modify', modified)\n      };\n    }\n  }]);\n\n  return Referee;\n}();\n\nexports.default = Referee;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction walk(nodes, cb) {\n  var slice = Array.prototype.slice;\n  if (!('length' in nodes)) nodes = [nodes];\n  nodes = slice.call(nodes);\n  while (nodes.length) {\n    var node = nodes.shift();\n    var ret = cb(node);\n    if (ret === undefined && node.childNodes && node.childNodes.length) {\n      nodes = slice.call(node.childNodes).concat(nodes);\n    }\n  }\n}\n\nexports.default = walk;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PreventObserverList = exports.ChangelogObserverList = exports.ObserverList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _referee = require('./referee');\n\nvar _referee2 = _interopRequireDefault(_referee);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction elementsAreRelated(el1, el2) {\n  return el1 === el2 || el1.contains(el2) || el2.contains(el1);\n}\n\nvar ObserverList = function () {\n  function ObserverList() {\n    _classCallCheck(this, ObserverList);\n\n    this.observers = [];\n  }\n\n  _createClass(ObserverList, [{\n    key: 'add',\n    value: function add(observer) {\n      this.observers.push(observer);\n    }\n  }, {\n    key: 'conflicts',\n    value: function conflicts(observer, node) {\n      return this.observers.filter(function (o) {\n        return !o.equals(observer) && o.connected && o.matches(node) && elementsAreRelated(o.parent, observer.parent);\n      });\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(observer, node) {\n      var conflicts = this.conflicts(observer, node);\n      if (conflicts.length === 0) return true;\n      return this.tiebreaker(observer, conflicts);\n    }\n  }, {\n    key: 'tiebreaker',\n    value: function tiebreaker(observer, conflicts) {\n      var uids = conflicts.map(function (_ref) {\n        var uid = _ref.uid;\n        return uid;\n      });\n      uids.push(observer.uid);\n      return uids.sort()[0] === observer.uid;\n    }\n  }]);\n\n  return ObserverList;\n}();\n\nvar PreventObserverList = function (_ObserverList) {\n  _inherits(PreventObserverList, _ObserverList);\n\n  function PreventObserverList(error) {\n    _classCallCheck(this, PreventObserverList);\n\n    var _this = _possibleConstructorReturn(this, (PreventObserverList.__proto__ || Object.getPrototypeOf(PreventObserverList)).call(this));\n\n    _this.error = error;\n    return _this;\n  }\n\n  _createClass(PreventObserverList, [{\n    key: 'resolve',\n    value: function resolve(observer, node, other) {\n      var go = true;\n      var internalConflicts = this.conflicts(observer, node);\n      if (internalConflicts.length > 0) {\n        go = this.tiebreaker(observer, internalConflicts);\n        if (!go) return false;\n      }\n      var externalConflicts = other.conflicts(observer, node);\n      if (externalConflicts.length > 0) {\n        console.warn(this.error);\n        go = false;\n      }\n      return go;\n    }\n  }]);\n\n  return PreventObserverList;\n}(ObserverList);\n\nvar ChangelogObserverList = function (_ObserverList2) {\n  _inherits(ChangelogObserverList, _ObserverList2);\n\n  function ChangelogObserverList() {\n    _classCallCheck(this, ChangelogObserverList);\n\n    return _possibleConstructorReturn(this, (ChangelogObserverList.__proto__ || Object.getPrototypeOf(ChangelogObserverList)).apply(this, arguments));\n  }\n\n  _createClass(ChangelogObserverList, [{\n    key: 'resolve',\n    value: function resolve(observer, node, undo) {\n      var conflicts = this.conflicts(observer, node);\n      if (conflicts.length === 0 || this.tiebreaker(observer, conflicts)) return true;\n      return this.lowLevelTiebreakers(undo, observer, conflicts);\n    }\n  }, {\n    key: 'lowLevelTiebreakers',\n    value: function lowLevelTiebreakers(undo, observer, conflicts) {\n      var _this3 = this;\n\n      var conflictList = { create: {}, delete: {}, modify: {} };\n      var types = ['create', 'delete', 'modify'];\n      var changed = { added: undo.create, removed: undo.delete, modified: undo.modify };\n      conflicts.forEach(function (conflict) {\n        var conflictRules = conflict.extras[0];\n        var conflictUndo = _referee2.default.deliberate(conflictRules, changed);\n        types.forEach(function (type) {\n          conflictUndo[type].forEach(function (key) {\n            if (conflictList[type][key] === undefined) conflictList[type][key] = [];\n            conflictList[type][key].push(conflict);\n          });\n        });\n      });\n      var newUndo = { create: [], delete: [], modify: [] };\n      types.forEach(function (type) {\n        newUndo[type] = undo[type].filter(function (key) {\n          return !conflictList[type][key] || _this3.tiebreaker(observer, conflictList[type][key]);\n        });\n      });\n      return newUndo;\n    }\n  }]);\n\n  return ChangelogObserverList;\n}(ObserverList);\n\nvar ConflictManager = function () {\n  function ConflictManager() {\n    var noop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, ConflictManager);\n\n    this.noop = noop;\n    if (!noop) {\n      var preventMsg = 'Nilbog conflict: preventCreate and preventDelete targeting same node. No action taken.';\n\n      this.observers = {\n        preventCreate: new PreventObserverList(preventMsg),\n        preventDelete: new PreventObserverList(preventMsg),\n        protectText: new ObserverList(),\n        protectClasses: new ChangelogObserverList(),\n        protectAttributes: new ChangelogObserverList()\n      };\n    }\n  }\n\n  _createClass(ConflictManager, [{\n    key: 'register',\n    value: function register(type, observer) {\n      if (!this.noop) this.observers[type].add(observer);\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(action, observer, node) {\n      var _this4 = this;\n\n      if (this.noop) return true;\n      var resolve = function resolve() {\n        var _observers$action;\n\n        for (var _len2 = arguments.length, more = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          more[_key2] = arguments[_key2];\n        }\n\n        return (_observers$action = _this4.observers[action]).resolve.apply(_observers$action, [observer, node].concat(more));\n      };\n      switch (action) {\n        case 'preventCreate':\n          return resolve(this.observers['preventDelete']);\n        case 'preventDelete':\n          return resolve(this.observers['preventCreate']);\n        default:\n          for (var _len = arguments.length, extras = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            extras[_key - 3] = arguments[_key];\n          }\n\n          return resolve.apply(undefined, extras);\n      }\n    }\n  }]);\n\n  return ConflictManager;\n}();\n\nexports.ObserverList = ObserverList;\nexports.ChangelogObserverList = ChangelogObserverList;\nexports.PreventObserverList = PreventObserverList;\nexports.default = ConflictManager;","/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _uid = require('uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _walk = require('./walk');\n\nvar _walk2 = _interopRequireDefault(_walk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MO = window.MutationObserver || window.WebkitMutationObserver;\n\nfunction _matches(el, selector) {\n  if (typeof selector === 'string') {\n    return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector || function (s) {\n      var matches = (this.document || this.ownerDocument).querySelectorAll(s);\n      var i = matches.length;\n      while (--i >= 0 && matches.item(i) !== this) {}\n      return i > -1;\n    }).call(el, selector);\n  } else if (Element.prototype.isPrototypeOf(selector)) {\n    return el === selector;\n  } else if (NodeList.prototype.isPrototypeOf(selector) || Array.isArray(selector)) {\n    var match = false;\n    selector.forEach(function (compareTo) {\n      match = _matches(el, compareTo);\n      if (match) return false;\n    });\n    return match;\n  } else {\n    return false;\n  }\n}\n\nvar Observer = function () {\n  function Observer(selector, parent, observerParams, fn) {\n    _classCallCheck(this, Observer);\n\n    this.selector = selector;\n\n    this.observer = new MO(fn.bind(this));\n\n    this.parent = parent;\n\n    this.params = observerParams;\n\n    this.connected = false;\n\n    for (var _len = arguments.length, extras = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n      extras[_key - 4] = arguments[_key];\n    }\n\n    this.extras = extras;\n\n    this.uid = (0, _uid2.default)();\n  }\n\n  _createClass(Observer, [{\n    key: 'matches',\n    value: function matches(el) {\n      return _matches(el, this.selector);\n    }\n  }, {\n    key: 'containsMatches',\n    value: function containsMatches(el) {\n      var _this = this;\n\n      var collection = [];\n      (0, _walk2.default)(el, function (node) {\n        if (_this.matches(node)) {\n          collection.push(node);\n          return true;\n        }\n      });\n      return collection;\n    }\n  }, {\n    key: 'inspect',\n    value: function inspect() {\n      return this.uid;\n    }\n  }, {\n    key: 'equals',\n    value: function equals(other) {\n      return this.uid === other.uid;\n    }\n  }, {\n    key: 'connect',\n    value: function connect() {\n      if (!this.connected) {\n        this.observer.observe(this.parent, this.params);\n        this.connected = true;\n      }\n      return true;\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      if (this.connected) {\n        this.observer.disconnect();\n        this.connected = false;\n      }\n      return true;\n    }\n  }, {\n    key: 'operate',\n    value: function operate(fn) {\n      if (this.connected) {\n        this.disconnect();\n        var f = fn.call(this);\n        this.connect();\n        return f;\n      } else {\n        return fn.call(this);\n      }\n    }\n  }]);\n\n  return Observer;\n}();\n\nexports.default = Observer;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _observer = require('./observer');\n\nvar _observer2 = _interopRequireDefault(_observer);\n\nvar _conflicts = require('./conflicts');\n\nvar _conflicts2 = _interopRequireDefault(_conflicts);\n\nvar _referee = require('./referee');\n\nvar _referee2 = _interopRequireDefault(_referee);\n\nvar _walk = require('./walk');\n\nvar _walk2 = _interopRequireDefault(_walk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction venn(left, right) {\n  return {\n    left: left.filter(function (a) {\n      return !right.includes(a);\n    }),\n    right: right.filter(function (a) {\n      return !left.includes(a);\n    }),\n    middle: left.filter(function (a) {\n      return right.includes(a);\n    })\n  };\n}\n\nfunction arrDiff(oldArr, newArr) {\n  var _venn = venn(newArr, oldArr),\n      added = _venn.left,\n      removed = _venn.right;\n\n  return {\n    added: added,\n    removed: removed\n  };\n}\n\nvar Nilbog = function () {\n  function Nilbog() {\n    var safe = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    _classCallCheck(this, Nilbog);\n\n    this.safe = safe;\n\n    this.conflictManager = new _conflicts2.default(!this.safe);\n  }\n\n  _createClass(Nilbog, [{\n    key: 'preventCreate',\n    value: function preventCreate(selector) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$parent = _ref.parent,\n          parent = _ref$parent === undefined ? document.documentElement : _ref$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { childList: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this = this;\n\n        records.forEach(function (_ref2) {\n          var addedNodes = _ref2.addedNodes;\n\n          addedNodes.forEach(function (node) {\n            if (_this.matches(node) && conflictManager.resolve('preventCreate', _this, node)) {\n              node.remove();\n            }\n          });\n        });\n      });\n      conflictManager.register('preventCreate', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectText',\n    value: function protectText(selector) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$parent = _ref3.parent,\n          parent = _ref3$parent === undefined ? document.documentElement : _ref3$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { characterData: true, characterDataOldValue: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this2 = this;\n\n        records.forEach(function (_ref4) {\n          var type = _ref4.type,\n              target = _ref4.target,\n              oldValue = _ref4.oldValue;\n\n          if (type === 'characterData' && _this2.matches(target.parentNode) && conflictManager.resolve('protectText', _this2, target.parentNode)) {\n            _this2.operate(function () {\n              target.data = oldValue;\n            });\n          }\n        });\n      });\n      conflictManager.register('protectText', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectAttributes',\n    value: function protectAttributes(selector) {\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$parent = _ref5.parent,\n          parent = _ref5$parent === undefined ? document.documentElement : _ref5$parent,\n          _ref5$rules = _ref5.rules,\n          rules = _ref5$rules === undefined ? { prevent: true, allow: false } : _ref5$rules;\n\n      var conflictManager = this.conflictManager;\n      var allow = _referee2.default.normalize(rules.allow);\n      var prevent = _referee2.default.normalize(rules.prevent);\n      var attributeFilter = _referee2.default.filter({ allow: allow, prevent: prevent });\n      var params = {\n        attributes: true,\n        attributeOldValue: true,\n        subtree: true,\n        attributeFilter: attributeFilter\n      };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this3 = this;\n\n        records.forEach(function (_ref6) {\n          var attributeName = _ref6.attributeName,\n              target = _ref6.target,\n              oldValue = _ref6.oldValue;\n\n          if (_this3.matches(target) && attributeName !== 'class') {\n            var changed = { added: [], removed: [], modified: [] };\n            var undoThis = void 0;\n            if (oldValue === null) {\n              changed.added.push(attributeName);\n              undoThis = 'create';\n            } else if (!target.hasAttribute(attributeName)) {\n              changed.removed.push(attributeName);\n              undoThis = 'delete';\n            } else if (oldValue !== target.getAttribute(attributeName)) {\n              changed.modified.push(attributeName);\n              undoThis = 'modify';\n            } else {\n              return false;\n            }\n            var undo = _referee2.default.deliberate({ allow: allow, prevent: prevent }, changed);\n            var resolution = conflictManager.resolve('protectAttributes', _this3, target, undo);\n            if (resolution !== true) undo = resolution;\n            if (undo[undoThis].length === 1) {\n              _this3.operate(function () {\n                switch (undoThis) {\n                  case 'create':\n                    target.removeAttribute(attributeName);\n                    break;\n                  case 'delete':\n                  case 'modify':\n                    target.setAttribute(attributeName, oldValue);\n                    break;\n                }\n              });\n            }\n          }\n        });\n      }, { allow: allow, prevent: prevent });\n      conflictManager.register('protectAttributes', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectClasses',\n    value: function protectClasses(selector) {\n      var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref7$parent = _ref7.parent,\n          parent = _ref7$parent === undefined ? document.documentElement : _ref7$parent,\n          _ref7$rules = _ref7.rules,\n          rules = _ref7$rules === undefined ? { prevent: true, allow: false } : _ref7$rules;\n\n      var conflictManager = this.conflictManager;\n      var allow = _referee2.default.normalize(rules.allow);\n      var prevent = _referee2.default.normalize(rules.prevent);\n      var params = {\n        attributes: true,\n        attributeOldValue: true,\n        subtree: true,\n        attributeFilter: ['class']\n      };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this4 = this;\n\n        records.forEach(function (_ref8) {\n          var attributeName = _ref8.attributeName,\n              target = _ref8.target,\n              oldValue = _ref8.oldValue;\n\n          if (_this4.matches(target)) {\n            var newClasses = target.getAttribute('class').split(' ').filter(function (className) {\n              return className !== '';\n            });\n            var oldClasses = oldValue.split(' ').filter(function (className) {\n              return className !== '';\n            });\n            var changed = arrDiff(oldClasses, newClasses);\n            var undo = _referee2.default.deliberate({ allow: allow, prevent: prevent }, changed);\n            var resolution = conflictManager.resolve('protectClasses', _this4, target, undo);\n            if (resolution !== true) undo = resolution;\n            if (undo.delete.length > 0 || undo.create.length > 0) {\n              var classes = [].concat(_toConsumableArray(newClasses.filter(function (className) {\n                return !undo.create.includes(className);\n              })), _toConsumableArray(undo.delete)).join(' ');\n              _this4.operate(function () {\n                target.setAttribute('class', classes);\n              });\n            }\n          }\n        });\n      }, { allow: allow, prevent: prevent });\n      conflictManager.register('protectClasses', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'preventDelete',\n    value: function preventDelete(selector) {\n      var _ref9 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref9$parent = _ref9.parent,\n          parent = _ref9$parent === undefined ? document.documentElement : _ref9$parent,\n          _ref9$onTreeDeletion = _ref9.onTreeDeletion,\n          onTreeDeletion = _ref9$onTreeDeletion === undefined ? false : _ref9$onTreeDeletion;\n\n      var conflictManager = this.conflictManager;\n      var params = { childList: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this5 = this;\n\n        records.forEach(function (_ref10) {\n          var removedNodes = _ref10.removedNodes,\n              target = _ref10.target,\n              nextSibling = _ref10.nextSibling,\n              previousSibling = _ref10.previousSibling;\n\n          var placeNode = function placeNode(node) {\n            if (!nextSibling && !previousSibling) {\n              target.appendChild(node);\n            } else if (nextSibling) {\n              target.insertBefore(node, nextSibling);\n            } else if (previousSibling) {\n              previousSibling.insertAdjacentHTML('beforebegin', node);\n            }\n          };\n          removedNodes.forEach(function (node) {\n            var collection = void 0;\n            if (_this5.matches(node)) {\n              if (conflictManager.resolve('preventDelete', _this5, node)) {\n                placeNode(node);\n              }\n            } else if (onTreeDeletion && (collection = _this5.containsMatches(node)).length > 0) {\n              collection = collection.filter(function (n) {\n                return conflictManager.resolve('preventDelete', _this5, n);\n              });\n              if (collection.length > 0) {\n                switch (onTreeDeletion) {\n                  case 'place-at-top-level':\n                    collection.forEach(function (n) {\n                      placeNode(n);\n                    });\n                    break;\n                  case 'recreate-full-tree':\n                    placeNode(node);\n                    break;\n                  case 'recreate-direct-path':\n                    var preserve = function preserve(node) {\n                      return collection.some(function (el) {\n                        return node.contains(el);\n                      });\n                    };\n                    var final = function final(node) {\n                      return collection.some(function (el) {\n                        return node.isSameNode(el);\n                      });\n                    };\n                    (0, _walk2.default)(node, function (node) {\n                      if (final(node)) return true;\n                      if (!preserve(node)) {\n                        node.remove();\n                        return true;\n                      }\n                    });\n                    placeNode(node);\n                    break;\n                }\n              }\n            }\n          });\n        });\n      });\n      conflictManager.register('preventDelete', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'freeze',\n    value: function freeze() {\n      return {\n        protectText: this.protectText.apply(this, arguments),\n        preventDelete: this.preventDelete.apply(this, arguments),\n        protectAttributes: this.protectAttributes.apply(this, arguments),\n        protectClasses: this.protectClasses.apply(this, arguments)\n      };\n    }\n  }]);\n\n  return Nilbog;\n}();\n\nmodule.exports = Nilbog;","var Nilbog = require('../dist/')\n\nfunction ready(fn) {\n  if (document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading') {\n    fn()\n  } else {\n    document.addEventListener('DOMContentLoaded', fn)\n  }\n}\n\n\nvar nilbog = new Nilbog(true);\nnilbog.preventDelete('.prevent-delete', { onTreeDeletion: 'place-at-top-level' })\n\nnilbog.preventCreate('.prevent-create')\n\nnilbog.protectText('.protect-text')\n\nnilbog.freeze('.freeze')\n\nnilbog.protectClasses('#protect-classes--default')\nnilbog.protectClasses('#protect-classes--allow-most', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['class-d'],\n      delete: ['class-a']\n    }\n  }\n})\nnilbog.protectClasses('#protect-classes--prevent-most', {\n  rules: {\n    prevent: true,\n    allow: {\n      create: ['class-d', 'class-b'], // Won't be able to delete class-d\n      delete: ['class-a', 'class-b']  // Won't be able to recreate class-a\n    }\n  }\n})\nnilbog.protectClasses('#protect-classes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['class-d', 'class-e'],\n      delete: ['class-a']\n    }\n  }\n})\nnilbog.protectClasses('#protect-classes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['class-d', 'class-f'],\n      delete: ['class-a', 'class-b']\n    }\n  }\n})\n\nnilbog.protectAttributes('.protect-attributes--default')\nnilbog.protectAttributes('.protect-attributes--allow-most', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['attr4'],\n      delete: ['attr1'],\n      modify: ['attr2']\n    }\n  }\n})\nnilbog.protectAttributes('.protect-attributes--prevent-most', {\n  rules: {\n    prevent: true,\n    allow: {\n      create: ['attr4', 'attr3'],\n      delete: ['attr1', 'attr3'],\n      modify: ['attr2']\n    }\n  }\n})\nnilbog.protectAttributes('.protect-attributes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['attr4', 'attr5'],\n      delete: ['attr1'],\n      modify: ['attr2']\n    }\n  }\n})\nnilbog.protectAttributes('.protect-attributes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['attr4', 'attr6'],\n      delete: ['attr1', 'attr2'],\n      modify: ['attr2']\n    }\n  }\n})\n\nready(function () {\n  // Should retain events on recreate\n  document.querySelectorAll('.prevent-delete').forEach(function (el) {\n    el.addEventListener('click', function () {\n      console.log('Click event')\n    });\n  });\n\n  function create() {\n    var created = document.createElement('div')\n    var createdText = document.createTextNode('Created')\n    created.classList.add('prevent-create')\n    created.appendChild(createdText)\n    console.log('Appending child:', created)\n    document.body.appendChild(created)\n  }\n  create()\n  setInterval(create, 30000)\n});"],"sourceRoot":""}