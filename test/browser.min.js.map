{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./dist/referee.js","webpack:///./dist/conflicts.js","webpack:///./node_modules/uid/index.js","webpack:///./dist/observer.js","webpack:///./dist/index.js","webpack:///./test/browser.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","Referee","instance","TypeError","_classCallCheck","this","_ref","prevent","observeThese","Set","observeAll","forEach","type","add","undefined","Array","from","ap","create","delete","modify","_ref2","_ref3","allow","_ref3$added","added","_ref3$removed","removed","_ref3$modified","modified","check","items","a","filter","item","includes","default","PreventObserverList","ChangelogObserverList","ObserverList","obj","_referee","_referee2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","observers","observer","push","node","equals","connected","matches","el1","parent","el2","contains","conflicts","tiebreaker","uids","map","uid","sort","_ObserverList","error","_this","getPrototypeOf","other","go","internalConflicts","console","warn","_ObserverList2","apply","arguments","undo","lowLevelTiebreakers","_this3","conflictList","types","changed","conflict","conflictRules","extras","conflictUndo","deliberate","newUndo","ConflictManager","noop","preventMsg","preventCreate","preventDelete","protectText","protectClasses","protectAttributes","action","_this4","resolve","_observers$action","_len2","more","_key2","concat","_len","_key","len","Math","random","toString","substr","_uid","_uid2","MO","window","MutationObserver","WebkitMutationObserver","Element","msMatchesSelector","Observer","selector","observerParams","fn","bind","params","el","_matches","matchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","document","ownerDocument","querySelectorAll","isPrototypeOf","NodeList","isArray","match","compareTo","observe","disconnect","connect","Promise","then","finally","_observer2","_interopRequireDefault","_conflicts2","_toConsumableArray","arr","arr2","Nilbog","safe","conflictManager","_ref$parent","documentElement","childList","subtree","records","addedNodes","remove","register","_ref3$parent","characterData","characterDataOldValue","_this2","_ref4","oldValue","parentNode","operate","data","_ref5","_ref5$parent","_ref5$rules","rules","normalize","attributes","attributeOldValue","attributeFilter","_ref6","attributeName","undoThis","hasAttribute","getAttribute","resolution","removeAttribute","setAttribute","_ref7","_ref7$parent","_ref7$rules","_ref8","left","right","_venn","newClasses","split","className","oldClasses","middle","classes","join","_ref9$parent","_this5","_ref10","removedNodes","nextSibling","previousSibling","insertBefore","insertAdjacentHTML","appendChild","nilbog","freeze","created","createElement","createdText","createTextNode","classList","log","body","addEventListener","setInterval","attachEvent","readyState"],"mappings":"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","file":"browser.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Referee = function () {\n  function Referee() {\n    _classCallCheck(this, Referee);\n  }\n\n  _createClass(Referee, null, [{\n    key: 'filter',\n    value: function filter(_ref) {\n      var prevent = _ref.prevent;\n\n      var observeThese = new Set();\n      var observeAll = false;\n      var types = ['create', 'modify', 'delete'];\n      types.forEach(function (type) {\n        var p = prevent[type];\n        if (p === true) {\n          observeAll = true;\n          return false;\n        }\n        p.forEach(function (i) {\n          observeThese.add(i);\n        });\n      });\n      return observeAll ? undefined : Array.from(observeThese);\n    }\n  }, {\n    key: 'normalize',\n    value: function normalize(ap) {\n      if (ap === true) {\n        return { create: true, delete: true, modify: true };\n      } else if (ap === false) {\n        return { create: [], delete: [], modify: [] };\n      } else {\n        return {\n          create: !ap.create ? [] : ap.create,\n          delete: !ap.delete ? [] : ap.delete,\n          modify: !ap.modify ? [] : ap.modify\n        };\n      }\n    }\n  }, {\n    key: 'deliberate',\n    value: function deliberate(_ref2, _ref3) {\n      var allow = _ref2.allow,\n          prevent = _ref2.prevent;\n      var _ref3$added = _ref3.added,\n          added = _ref3$added === undefined ? [] : _ref3$added,\n          _ref3$removed = _ref3.removed,\n          removed = _ref3$removed === undefined ? [] : _ref3$removed,\n          _ref3$modified = _ref3.modified,\n          modified = _ref3$modified === undefined ? [] : _ref3$modified;\n\n      var check = function check(type, items) {\n        var a = allow[type];\n        var p = prevent[type];\n        return items.filter(function (item) {\n          if (p === true && a === true) {\n            return false;\n          } else if (p === true && a !== true) {\n            return !a.includes(item);\n          } else if (p !== true && a === true) {\n            return p.includes(item);\n          } else {\n            return p.includes(item) && !a.includes(item);\n          }\n        });\n      };\n      return {\n        create: check('create', added),\n        delete: check('delete', removed),\n        modify: check('modify', modified)\n      };\n    }\n  }]);\n\n  return Referee;\n}();\n\nexports.default = Referee;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PreventObserverList = exports.ChangelogObserverList = exports.ObserverList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _referee = require('./referee');\n\nvar _referee2 = _interopRequireDefault(_referee);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction elementsAreRelated(el1, el2) {\n  return el1 === el2 || el1.contains(el2) || el2.contains(el1);\n}\n\nvar ObserverList = function () {\n  function ObserverList() {\n    _classCallCheck(this, ObserverList);\n\n    this.observers = [];\n  }\n\n  _createClass(ObserverList, [{\n    key: 'add',\n    value: function add(observer) {\n      this.observers.push(observer);\n    }\n  }, {\n    key: 'conflicts',\n    value: function conflicts(observer, node) {\n      return this.observers.filter(function (o) {\n        return !o.equals(observer) && o.connected && o.matches(node) && elementsAreRelated(o.parent, observer.parent);\n      });\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(observer, node) {\n      var conflicts = this.conflicts(observer, node);\n      if (conflicts.length === 0) return true;\n      return this.tiebreaker(observer, conflicts);\n    }\n  }, {\n    key: 'tiebreaker',\n    value: function tiebreaker(observer, conflicts) {\n      var uids = conflicts.map(function (_ref) {\n        var uid = _ref.uid;\n        return uid;\n      });\n      uids.push(observer.uid);\n      return uids.sort()[0] === observer.uid;\n    }\n  }]);\n\n  return ObserverList;\n}();\n\nvar PreventObserverList = function (_ObserverList) {\n  _inherits(PreventObserverList, _ObserverList);\n\n  function PreventObserverList(error) {\n    _classCallCheck(this, PreventObserverList);\n\n    var _this = _possibleConstructorReturn(this, (PreventObserverList.__proto__ || Object.getPrototypeOf(PreventObserverList)).call(this));\n\n    _this.error = error;\n    return _this;\n  }\n\n  _createClass(PreventObserverList, [{\n    key: 'resolve',\n    value: function resolve(observer, node, other) {\n      var go = true;\n      var internalConflicts = this.conflicts(observer, node);\n      if (internalConflicts.length > 0) {\n        go = this.tiebreaker(observer, internalConflicts);\n        if (!go) return false;\n      }\n      var externalConflicts = other.conflicts(observer, node);\n      if (externalConflicts.length > 0) {\n        console.warn(this.error);\n        go = false;\n      }\n      return go;\n    }\n  }]);\n\n  return PreventObserverList;\n}(ObserverList);\n\nvar ChangelogObserverList = function (_ObserverList2) {\n  _inherits(ChangelogObserverList, _ObserverList2);\n\n  function ChangelogObserverList() {\n    _classCallCheck(this, ChangelogObserverList);\n\n    return _possibleConstructorReturn(this, (ChangelogObserverList.__proto__ || Object.getPrototypeOf(ChangelogObserverList)).apply(this, arguments));\n  }\n\n  _createClass(ChangelogObserverList, [{\n    key: 'resolve',\n    value: function resolve(observer, node, undo) {\n      var conflicts = this.conflicts(observer, node);\n      if (conflicts.length === 0 || this.tiebreaker(observer, conflicts)) return true;\n      return this.lowLevelTiebreakers(undo, observer, conflicts);\n    }\n  }, {\n    key: 'lowLevelTiebreakers',\n    value: function lowLevelTiebreakers(undo, observer, conflicts) {\n      var _this3 = this;\n\n      var conflictList = { create: {}, delete: {}, modify: {} };\n      var types = ['create', 'delete', 'modify'];\n      var changed = { added: undo.create, removed: undo.delete, modified: undo.modify };\n      conflicts.forEach(function (conflict) {\n        var conflictRules = conflict.extras[0];\n        var conflictUndo = _referee2.default.deliberate(conflictRules, changed);\n        types.forEach(function (type) {\n          conflictUndo[type].forEach(function (key) {\n            if (conflictList[type][key] === undefined) conflictList[type][key] = [];\n            conflictList[type][key].push(conflict);\n          });\n        });\n      });\n      var newUndo = { create: [], delete: [], modify: [] };\n      types.forEach(function (type) {\n        newUndo[type] = undo[type].filter(function (key) {\n          return !conflictList[type][key] || _this3.tiebreaker(observer, conflictList[type][key]);\n        });\n      });\n      return newUndo;\n    }\n  }]);\n\n  return ChangelogObserverList;\n}(ObserverList);\n\nvar ConflictManager = function () {\n  function ConflictManager() {\n    var noop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, ConflictManager);\n\n    this.noop = noop;\n    if (!noop) {\n      var preventMsg = 'Nilbog conflict: preventCreate and preventDelete targeting same node. No action taken.';\n\n      this.observers = {\n        preventCreate: new PreventObserverList(preventMsg),\n        preventDelete: new PreventObserverList(preventMsg),\n        protectText: new ObserverList(),\n        protectClasses: new ChangelogObserverList(),\n        protectAttributes: new ChangelogObserverList()\n      };\n    }\n  }\n\n  _createClass(ConflictManager, [{\n    key: 'register',\n    value: function register(type, observer) {\n      if (!this.noop) this.observers[type].add(observer);\n    }\n  }, {\n    key: 'resolve',\n    value: function resolve(action, observer, node) {\n      var _this4 = this;\n\n      if (this.noop) return true;\n      var resolve = function resolve() {\n        var _observers$action;\n\n        for (var _len2 = arguments.length, more = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          more[_key2] = arguments[_key2];\n        }\n\n        return (_observers$action = _this4.observers[action]).resolve.apply(_observers$action, [observer, node].concat(more));\n      };\n      switch (action) {\n        case 'preventCreate':\n          return resolve(this.observers['preventDelete']);\n        case 'preventDelete':\n          return resolve(this.observers['preventCreate']);\n        default:\n          for (var _len = arguments.length, extras = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            extras[_key - 3] = arguments[_key];\n          }\n\n          return resolve.apply(undefined, extras);\n      }\n    }\n  }]);\n\n  return ConflictManager;\n}();\n\nexports.ObserverList = ObserverList;\nexports.ChangelogObserverList = ChangelogObserverList;\nexports.PreventObserverList = PreventObserverList;\nexports.default = ConflictManager;","/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _uid = require('uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MO = window.MutationObserver || window.WebkitMutationObserver;\n\nif (!Element.prototype.matches) {\n  Element.prototype.matches = Element.prototype.msMatchesSelector;\n}\n\nfunction _matches(el, selector) {\n  if (typeof selector === 'string') {\n    return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector || function (s) {\n      var matches = (this.document || this.ownerDocument).querySelectorAll(s);\n      var i = matches.length;\n      while (--i >= 0 && matches.item(i) !== this) {}\n      return i > -1;\n    }).call(el, selector);\n  } else if (Element.prototype.isPrototypeOf(selector)) {\n    return el === selector;\n  } else if (NodeList.prototype.isPrototypeOf(selector) || Array.isArray(selector)) {\n    var match = false;\n    selector.forEach(function (compareTo) {\n      match = _matches(el, compareTo);\n      if (match) return false;\n    });\n    return match;\n  } else {\n    return false;\n  }\n}\n\nvar Observer = function () {\n  function Observer(selector, parent, observerParams, fn) {\n    _classCallCheck(this, Observer);\n\n    this.selector = selector;\n\n    this.observer = new MO(fn.bind(this));\n\n    this.parent = parent;\n\n    this.params = observerParams;\n\n    this.connected = false;\n\n    for (var _len = arguments.length, extras = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n      extras[_key - 4] = arguments[_key];\n    }\n\n    this.extras = extras;\n\n    this.uid = (0, _uid2.default)();\n  }\n\n  _createClass(Observer, [{\n    key: 'matches',\n    value: function matches(el) {\n      return _matches(el, this.selector);\n    }\n  }, {\n    key: 'inspect',\n    value: function inspect() {\n      return this.uid;\n    }\n  }, {\n    key: 'equals',\n    value: function equals(other) {\n      return this.uid === other.uid;\n    }\n  }, {\n    key: 'connect',\n    value: function connect() {\n      if (!this.connected) {\n        this.observer.observe(this.parent, this.params);\n        this.connected = true;\n      }\n      return true;\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      if (this.connected) {\n        this.observer.disconnect();\n        this.connected = false;\n      }\n      return true;\n    }\n  }, {\n    key: 'operate',\n    value: function operate(fn) {\n      var _this = this;\n\n      if (this.connected) {\n        if (typeof fn === 'function') {\n          this.disconnect();\n          fn.call(this);\n          this.connect();\n        } else if (Promise.prototype.isPrototypeOf(fn)) {\n          return Promise.resolve(this.disconnect()).then(function () {\n            return fn.call(_this);\n          }).finally(function () {\n            return Promise.resolve(_this.connect());\n          });\n        }\n      } else {\n        if (typeof fn === 'function') {\n          fn.call(this);\n        } else if (Promise.prototype.isPrototypeOf(fn)) {\n          return Promise.resolve(fn.call(this)).finally(function () {\n            return Promise.resolve(true);\n          });\n        }\n      }\n    }\n  }]);\n\n  return Observer;\n}();\n\nexports.default = Observer;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _observer = require('./observer');\n\nvar _observer2 = _interopRequireDefault(_observer);\n\nvar _conflicts = require('./conflicts');\n\nvar _conflicts2 = _interopRequireDefault(_conflicts);\n\nvar _referee = require('./referee');\n\nvar _referee2 = _interopRequireDefault(_referee);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction venn(left, right) {\n  return {\n    left: left.filter(function (a) {\n      return !right.includes(a);\n    }),\n    right: right.filter(function (a) {\n      return !left.includes(a);\n    }),\n    middle: left.filter(function (a) {\n      return right.includes(a);\n    })\n  };\n}\n\nfunction arrDiff(oldArr, newArr) {\n  var _venn = venn(newArr, oldArr),\n      added = _venn.left,\n      removed = _venn.right;\n\n  return {\n    added: added,\n    removed: removed\n  };\n}\n\nvar Nilbog = function () {\n  function Nilbog() {\n    var safe = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    _classCallCheck(this, Nilbog);\n\n    this.safe = safe;\n\n    this.conflictManager = new _conflicts2.default(!this.safe);\n  }\n\n  _createClass(Nilbog, [{\n    key: 'preventCreate',\n    value: function preventCreate(selector) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$parent = _ref.parent,\n          parent = _ref$parent === undefined ? document.documentElement : _ref$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { childList: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this = this;\n\n        records.forEach(function (_ref2) {\n          var addedNodes = _ref2.addedNodes;\n\n          addedNodes.forEach(function (node) {\n            if (_this.matches(node) && conflictManager.resolve('preventCreate', _this, node)) {\n              node.remove();\n            }\n          });\n        });\n      });\n      conflictManager.register('preventCreate', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectText',\n    value: function protectText(selector) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$parent = _ref3.parent,\n          parent = _ref3$parent === undefined ? document.documentElement : _ref3$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { characterData: true, characterDataOldValue: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this2 = this;\n\n        records.forEach(function (_ref4) {\n          var type = _ref4.type,\n              target = _ref4.target,\n              oldValue = _ref4.oldValue;\n\n          if (type === 'characterData' && _this2.matches(target.parentNode) && conflictManager.resolve('protectText', _this2, target.parentNode)) {\n            _this2.operate(function () {\n              target.data = oldValue;\n            });\n          }\n        });\n      });\n      conflictManager.register('protectText', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectAttributes',\n    value: function protectAttributes(selector) {\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$parent = _ref5.parent,\n          parent = _ref5$parent === undefined ? document.documentElement : _ref5$parent,\n          _ref5$rules = _ref5.rules,\n          rules = _ref5$rules === undefined ? { prevent: true, allow: false } : _ref5$rules;\n\n      var conflictManager = this.conflictManager;\n      var allow = _referee2.default.normalize(rules.allow);\n      var prevent = _referee2.default.normalize(rules.prevent);\n      var attributeFilter = _referee2.default.filter({ allow: allow, prevent: prevent });\n      var params = {\n        attributes: true,\n        attributeOldValue: true,\n        subtree: true,\n        attributeFilter: attributeFilter\n      };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this3 = this;\n\n        records.forEach(function (_ref6) {\n          var attributeName = _ref6.attributeName,\n              target = _ref6.target,\n              oldValue = _ref6.oldValue;\n\n          if (_this3.matches(target) && attributeName !== 'class') {\n            var changed = { added: [], removed: [], modified: [] };\n            var undoThis = void 0;\n            if (oldValue === null) {\n              changed.added.push(attributeName);\n              undoThis = 'create';\n            } else if (!target.hasAttribute(attributeName)) {\n              changed.removed.push(attributeName);\n              undoThis = 'delete';\n            } else if (oldValue !== target.getAttribute(attributeName)) {\n              changed.modified.push(attributeName);\n              undoThis = 'modify';\n            } else {\n              return false;\n            }\n            var undo = _referee2.default.deliberate({ allow: allow, prevent: prevent }, changed);\n            var resolution = conflictManager.resolve('protectAttributes', _this3, target, undo);\n            if (resolution !== true) undo = resolution;\n            if (undo[undoThis].length === 1) {\n              _this3.operate(function () {\n                switch (undoThis) {\n                  case 'create':\n                    target.removeAttribute(attributeName);\n                    break;\n                  case 'delete':\n                  case 'modify':\n                    target.setAttribute(attributeName, oldValue);\n                    break;\n                }\n              });\n            }\n          }\n        });\n      }, { allow: allow, prevent: prevent });\n      conflictManager.register('protectAttributes', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'protectClasses',\n    value: function protectClasses(selector) {\n      var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref7$parent = _ref7.parent,\n          parent = _ref7$parent === undefined ? document.documentElement : _ref7$parent,\n          _ref7$rules = _ref7.rules,\n          rules = _ref7$rules === undefined ? { prevent: true, allow: false } : _ref7$rules;\n\n      var conflictManager = this.conflictManager;\n      var allow = _referee2.default.normalize(rules.allow);\n      var prevent = _referee2.default.normalize(rules.prevent);\n      var params = {\n        attributes: true,\n        attributeOldValue: true,\n        subtree: true,\n        attributeFilter: ['class']\n      };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this4 = this;\n\n        records.forEach(function (_ref8) {\n          var attributeName = _ref8.attributeName,\n              target = _ref8.target,\n              oldValue = _ref8.oldValue;\n\n          if (_this4.matches(target)) {\n            var newClasses = target.getAttribute('class').split(' ').filter(function (className) {\n              return className !== '';\n            });\n            var oldClasses = oldValue.split(' ').filter(function (className) {\n              return className !== '';\n            });\n            var changed = arrDiff(oldClasses, newClasses);\n            var undo = _referee2.default.deliberate({ allow: allow, prevent: prevent }, changed);\n            var resolution = conflictManager.resolve('protectClasses', _this4, target, undo);\n            if (resolution !== true) undo = resolution;\n            if (undo.delete.length > 0 || undo.create.length > 0) {\n              var classes = [].concat(_toConsumableArray(newClasses.filter(function (className) {\n                return !undo.create.includes(className);\n              })), _toConsumableArray(undo.delete)).join(' ');\n              _this4.operate(function () {\n                target.setAttribute('class', classes);\n              });\n            }\n          }\n        });\n      }, { allow: allow, prevent: prevent });\n      conflictManager.register('protectClasses', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'preventDelete',\n    value: function preventDelete(selector) {\n      var _ref9 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref9$parent = _ref9.parent,\n          parent = _ref9$parent === undefined ? document.documentElement : _ref9$parent;\n\n      var conflictManager = this.conflictManager;\n      var params = { childList: true, subtree: true };\n      var observer = new _observer2.default(selector, parent, params, function (records) {\n        var _this5 = this;\n\n        records.forEach(function (_ref10) {\n          var removedNodes = _ref10.removedNodes,\n              target = _ref10.target,\n              nextSibling = _ref10.nextSibling,\n              previousSibling = _ref10.previousSibling;\n\n          removedNodes.forEach(function (node) {\n            if (_this5.matches(node) && conflictManager.resolve('preventDelete', _this5, node)) {\n              if (!nextSibling && !previousSibling) {\n                target.appendChild(node);\n              } else if (nextSibling) {\n                target.insertBefore(node, nextSibling);\n              } else if (previousSibling) {\n                previousSibling.insertAdjacentHTML('beforebegin', node);\n              }\n            }\n          });\n        });\n      });\n      conflictManager.register('preventDelete', observer);\n      observer.connect();\n      return observer;\n    }\n  }, {\n    key: 'freeze',\n    value: function freeze() {\n      return {\n        protectText: this.protectText.apply(this, arguments),\n        preventDelete: this.preventDelete.apply(this, arguments),\n        protectAttributes: this.protectAttributes.apply(this, arguments),\n        protectClasses: this.protectClasses.apply(this, arguments)\n      };\n    }\n  }]);\n\n  return Nilbog;\n}();\n\nmodule.exports = Nilbog;","var Nilbog = require('../dist/')\n\nfunction ready(fn) {\n  if (document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading') {\n    fn()\n  } else {\n    document.addEventListener('DOMContentLoaded', fn)\n  }\n}\n\n\nvar nilbog = new Nilbog(true);\nnilbog.preventDelete('.prevent-delete')\n\nnilbog.preventCreate('.prevent-create')\n\nnilbog.protectText('.protect-text')\n\nnilbog.freeze('.freeze')\n\nnilbog.protectClasses('#protect-classes--default')\nnilbog.protectClasses('#protect-classes--allow-most', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['class-d'],\n      delete: ['class-a']\n    }\n  }\n})\nnilbog.protectClasses('#protect-classes--prevent-most', {\n  rules: {\n    prevent: true,\n    allow: {\n      create: ['class-d', 'class-b'], // Won't be able to delete class-d\n      delete: ['class-a', 'class-b']  // Won't be able to recreate class-a\n    }\n  }\n})\nnilbog.protectClasses('#protect-classes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['class-d', 'class-e'],\n      delete: ['class-a']\n    }\n  }\n})\nnilbog.protectClasses('#protect-classes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['class-d', 'class-f'],\n      delete: ['class-a', 'class-b']\n    }\n  }\n})\n\nnilbog.protectAttributes('.protect-attributes--default')\nnilbog.protectAttributes('.protect-attributes--allow-most', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['attr4'],\n      delete: ['attr1'],\n      modify: ['attr2']\n    }\n  }\n})\nnilbog.protectAttributes('.protect-attributes--prevent-most', {\n  rules: {\n    prevent: true,\n    allow: {\n      create: ['attr4', 'attr3'],\n      delete: ['attr1', 'attr3'],\n      modify: ['attr2']\n    }\n  }\n})\nnilbog.protectAttributes('.protect-attributes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['attr4', 'attr5'],\n      delete: ['attr1'],\n      modify: ['attr2']\n    }\n  }\n})\nnilbog.protectAttributes('.protect-attributes--conflict', {\n  rules: {\n    allow: true,\n    prevent: {\n      create: ['attr4', 'attr6'],\n      delete: ['attr1', 'attr2'],\n      modify: ['attr2']\n    }\n  }\n})\n\nready(function () {\n  // Should retain events on recreate\n  document.querySelectorAll('.prevent-delete').forEach(function (el) {\n    el.addEventListener('click', function () {\n      console.log('Click event')\n    });\n  });\n\n  function create() {\n    var created = document.createElement('div')\n    var createdText = document.createTextNode('Created')\n    created.classList.add('prevent-create')\n    created.appendChild(createdText)\n    console.log('Appending child:', created)\n    document.body.appendChild(created)\n  }\n  create()\n  setInterval(create, 30000)\n});"],"sourceRoot":""}